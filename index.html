<!DOCTYPE html>
<html lang="en-PK">
<head>
    <!-- ============== SEO Meta Tags ============== -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fanan Family Restaurant |Deals & Best Desi Food</title>
    <meta name="description" content="Get AI-powered drink suggestions with your meal! Order authentic Pakistani cuisine, deals, and platters online from Fanan Family Restaurant in Multan.">
    <meta name="keywords" content="AI food suggestion, Pakistani restaurant Multan, student deal multan, desi food deals, food platters multan, Fanan Family Restaurant, best biryani Multan, family restaurant Multan, chicken karahi, online food order">
    <meta name="author" content="Fanan Family Restaurant">

    <!-- ============== Favicon ============== -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üç≤</text></svg>">
    
    <!-- ============== Stylesheets and Fonts ============== -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- ============== Custom Styles ============== -->
    <style>
        :root {
            --primary-color: #c08401; /* A rich, deep gold */
            --dark-bg: #1a1a1a;
            --light-bg: #f9f6f2;
            --text-dark: #2d2d2d;
            --text-light: #e5e5e5;
        }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--light-bg);
            color: var(--text-dark);
            overflow-x: hidden; /* Prevent horizontal scroll */
        }
        .font-display { font-family: 'Cormorant Garamond', serif; }
        h1, h2, h3 {
            font-family: 'Cormorant Garamond', serif;
            font-weight: 700;
        }
        .hero-section {
            background-image: linear-gradient(rgba(26, 26, 26, 0.7), rgba(26, 26, 26, 0.7)), url('https://images.unsplash.com/photo-1504674900247-0877df9cc836?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            background-attachment: fixed; /* Parallax effect on desktop */
        }
        .nav-link {
            position: relative;
            transition: color 0.3s ease;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--primary-color);
            transition: width 0.4s ease;
        }
        .nav-link:hover::after, .nav-link.active::after { width: 100%; }
        .btn {
            padding: 10px 24px;
            border-radius: 50px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            display: inline-block;
        }
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
            box-shadow: 0 4px 15px rgba(192, 132, 1, 0.3);
        }
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(192, 132, 1, 0.5);
        }
        .btn-secondary {
            background-color: #4a5568;
            color: white;
        }
        .btn-secondary:hover {
            background-color: #2d3748;
        }
        .btn-ai {
            background: linear-gradient(45deg, #8A2BE2, #4A00E0);
            color: white;
        }
        .btn-ai:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(74, 0, 224, 0.4);
        }
        .tab-button {
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        .tab-button.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
        .menu-item-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .menu-item-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .reveal {
            position: relative;
            transform: translateY(100px);
            opacity: 0;
            transition: 1s all ease;
        }
        .reveal.active {
            transform: translateY(0);
            opacity: 1;
        }
        /* Modal & Cart Styles */
        .modal, #cart-panel, #mobile-menu {
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }
        .modal-overlay, #cart-overlay {
            transition: opacity 0.3s ease-in-out;
        }
        .cart-item-quantity-btn {
            width: 28px;
            height: 28px;
            border: 1px solid #ddd;
            border-radius: 50%;
        }
        /* Floating Cart Button */
        #floating-cart-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
        }
        /* Add to Cart Popup/Toast */
        #toast-notification {
            position: fixed;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            transition: bottom 0.5s ease-in-out;
            z-index: 200;
        }
        #toast-notification.show {
            bottom: 30px;
        }
    </style>

    <!-- SEO: JSON-LD Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Restaurant",
      "name": "Fanan Family Restaurant",
      "image": "https://images.unsplash.com/photo-1504674900247-0877df9cc836?q=80&w=2070&auto=format&fit=crop",
      "url": "https://www.FananFamilyRestaurant.com",
      "telephone": "+923008738377",
      "priceRange": "PKR",
      "menu": "https://www.FananFamilyRestaurant.com/#menu",
      "servesCuisine": "Pakistani",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Old Shujabad Road, Near City Park",
        "addressLocality": "Multan",
        "addressRegion": "Punjab",
        "country": "PK"
      },
      "geo": { "@type": "GeoCoordinates", "latitude": 30.1575, "longitude": 71.5249 },
      "openingHoursSpecification": {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],
        "opens": "12:00",
        "closes": "02:00"
      } 
    }
    </script>
</head>
<body class="text-gray-800">

    <!-- Header for Mobile and Top bar for Desktop -->
    <header class="bg-gray-900 text-white sticky top-0 z-50 shadow-md lg:hidden">
        <div class="container mx-auto px-4 sm:px-6 py-3 flex justify-between items-center">
             <a href="#" class="text-2xl font-display font-bold">Fanan Restaurant</a>
             <button id="mobile-menu-button" class="p-2 focus:outline-none">
                 <svg id="menu-open-icon" xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                 <svg id="menu-close-icon" xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
             </button>
        </div>
    </header>
    
    <!-- Mobile Menu -->
    <div id="mobile-menu" class="lg:hidden fixed top-0 left-0 w-full h-full bg-gray-900 bg-opacity-95 z-40 transform -translate-x-full flex items-center justify-center text-center">
        <nav class="flex flex-col space-y-8 text-2xl text-white">
            <a href="#about" class="nav-link mobile-nav-link">About</a>
            <a href="#menu" class="nav-link mobile-nav-link">Menu</a>
            <a href="#specials" class="nav-link mobile-nav-link">Specials</a>
            <a href="#gallery" class="nav-link mobile-nav-link">Gallery</a>
            <a href="#reviews" class="nav-link mobile-nav-link">Reviews</a>
            <a href="#contact" class="nav-link mobile-nav-link">Contact</a>
        </nav>
    </div>

    <!-- Hero Section with Centered Navigation for Desktop -->
    <section class="hero-section min-h-screen flex flex-col text-white">
        <div class="flex-grow flex flex-col justify-center items-center text-center px-4">
             <div class="mb-8 reveal active">
                <span class="text-3xl text-yellow-300">Welcome To</span>
                <h1 class="text-5xl sm:text-6xl md:text-8xl font-display mt-2">Fanan Restaurant</h1>
                <p class="text-lg md:text-xl mt-4 text-gray-300 max-w-3xl">A Taste of Authentic Pakistani Tradition in Multan</p>
            </div>
            <a href="#menu" class="btn btn-primary reveal active">Explore Menu</a>
        </div>
        <nav id="navbar" class="hidden lg:flex bg-black bg-opacity-50 backdrop-blur-sm py-4 justify-center items-center sticky top-0">
            <div class="container mx-auto flex justify-center items-center space-x-10 text-lg">
                <a href="#about" class="nav-link">About</a>
                <a href="#menu" class="nav-link">Menu</a>
                <a href="#specials" class="nav-link">Specials</a>
                <a href="#gallery" class="nav-link">Gallery</a>
                <a href="#reviews" class="nav-link">Reviews</a>
                <a href="#contact" class="nav-link">Contact</a>
            </div>
        </nav>
    </section>

    <!-- Main Content -->
    <main>
        <!-- Menu Section with Tabs -->
        <section id="menu" class="py-20 md:py-24">
            <div class="container mx-auto px-6 reveal">
                <h2 class="text-4xl lg:text-5xl font-display text-center mb-4">Our Menu</h2>
                <p class="text-center text-lg text-gray-600 max-w-2xl mx-auto mb-12">Sizzling BBQ se le kar mazedar Karahi tak, har cheez lajawab.</p>

                <div id="tab-buttons" class="flex flex-wrap justify-center border-b mb-12 space-x-2 md:space-x-8">
                    <button class="tab-button active text-base md:text-lg font-semibold py-2 px-4" data-tab="deals">Deals & Platters</button>
                    <button class="tab-button text-base md:text-lg font-semibold py-2 px-4" data-tab="salan">Main Courses</button>
                    <button class="tab-button text-base md:text-lg font-semibold py-2 px-4" data-tab="bbq">BBQ & Grill</button>
                    <button class="tab-button text-base md:text-lg font-semibold py-2 px-4" data-tab="rice">Rice Dishes</button>
                    <button class="tab-button text-base md:text-lg font-semibold py-2 px-4" data-tab="beverages">Beverages</button>
                    <button class="tab-button text-base md:text-lg font-semibold py-2 px-4" data-tab="bread">Breads</button>
                </div>

                <div id="menu-items-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                    <!-- Menu items will be dynamically generated by JS -->
                </div>
            </div>
        </section>
    </main>
    
    <!-- Floating Cart Button -->
    <button id="floating-cart-button" class="bg-yellow-500 text-white p-4 rounded-full shadow-lg relative transform hover:scale-110 transition-transform">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
        <span id="cart-count" class="absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold rounded-full h-6 w-6 flex items-center justify-center hidden">0</span>
    </button>
    <!-- Add to Cart Toast Notification -->
    <div id="toast-notification" class="bg-gray-800 text-white py-2 px-6 rounded-full shadow-lg">
        <p id="toast-message"></p>
    </div>

    <!-- Cart Panel -->
    <div id="cart-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-[110] hidden"></div>
    <div id="cart-panel" class="fixed top-0 right-0 w-full max-w-md h-full bg-white z-[120] shadow-2xl transform translate-x-full flex flex-col">
        <div class="flex justify-between items-center p-4 border-b">
            <h2 class="text-2xl font-display">Cart Menu</h2>
            <button id="cart-close-button" class="p-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
        </div>
        <div id="cart-items" class="flex-grow p-4 overflow-y-auto">
            <p id="empty-cart-msg" class="text-center text-gray-500">Your Cart is Empty.</p>
        </div>
        <div id="ai-suggestion-area" class="p-4 border-t hidden">
             <button id="suggestion-button" class="w-full btn btn-ai mb-4">Perfect Drink Suggestion ‚ú®</button>
             <div id="suggestion-result" class="text-center"></div>
        </div>
        <div class="p-4 border-t bg-gray-50">
            <div class="flex justify-between items-center mb-4">
                <span class="text-xl font-bold">Total</span>
                <span id="cart-total" class="text-xl font-bold text-yellow-700">Rs. 0</span>
            </div>
            <button id="checkout-button" class="w-full btn btn-primary">Place Order</button>
        </div>
    </div>
    
    <!-- Checkout Modal -->
    <div id="checkout-modal-overlay" class="fixed inset-0 bg-black bg-opacity-60 z-[130] hidden modal-overlay"></div>
    <div id="checkout-modal" class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-11/12 max-w-lg bg-white p-6 rounded-lg shadow-2xl z-[140] hidden modal scale-95 opacity-0">
        <h2 class="text-3xl font-display mb-6 text-center">Order Details</h2>
        <form id="checkout-form">
            <div class="mb-4">
                <label for="customer-name" class="block text-gray-700 font-semibold mb-2">Your Name</label>
                <input type="text" id="customer-name" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500" required>
            </div>
            <div class="mb-4">
                <label for="customer-phone" class="block text-gray-700 font-semibold mb-2">Phone Number</label>
                <input type="tel" id="customer-phone" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500" required>
            </div>
            <div class="mb-6">
                <label for="customer-address" class="block text-gray-700 font-semibold mb-2">Delivery Address</label>
                <textarea id="customer-address" rows="3" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500" required></textarea>
            </div>
            <div class="flex justify-end space-x-4">
                <button type="button" id="cancel-order-button" class="btn bg-gray-300 text-gray-800">Cancel</button>
                <button type="submit" class="btn btn-primary">Confirm & Send on WhatsApp</button>
            </div>
        </form>
    </div>


    <!-- Footer etc. -->
    <footer id="contact" class="bg-gray-900 text-white py-20">
        <div class="container mx-auto px-6 text-center reveal">
            <h2 class="text-4xl font-display mb-4">Visit or Call Us</h2>
            <p class="text-lg text-gray-400 mb-8">We are open from 12:00 PM to 2:00 AM, Seven days a week.</p>
            <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-8">
                <div class="bg-gray-800 p-8 rounded-lg">
                    <h3 class="text-2xl font-display text-yellow-400 mb-2">Location</h3>
                    <p>Old Shujabad Road, Near City Park <br> Multan, Punjab, Pakistan</p>
                </div>
                 <div class="bg-gray-800 p-8 rounded-lg">
                    <h3 class="text-2xl font-display text-yellow-400 mb-2">Reservations & Delivery</h3>
                    <div class="flex flex-col space-y-2 mt-2">
                        <a href="tel:+923008738377" class="text-white hover:text-yellow-400 text-xl font-bold transition-colors">+92 300 8738377</a>
                        <a href="tel:+923017881076" class="text-white hover:text-yellow-400 text-xl font-bold transition-colors">+92 301 7881076</a>
                    </div>
                </div>
            </div>
             <p class="text-sm mt-12 text-gray-500">&copy; <span id="year"></span> Fanan Family Restaurant. Designed with Passion.</p>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        // --- Globals ---
        let cart = [];
        const menuItemsContainer = document.getElementById('menu-items-container');
        const tabButtons = document.querySelectorAll('.tab-button');
        const restaurantWhatsAppNumber = "923006234699"; // IMPORTANT: Replace with your actual WhatsApp number with country code
        
        // --- Menu Data ---
        const menuData = {
            deals: [
                { id: 'D01', name: 'Shahi Deal', desc: 'Half Chicken, 2 Tikka Boti, 2 Chk Kabab, Half Saji w/Rice, 4 Roti, Salad, Raita.', price: 2599, img: 'https://placehold.co/600x400/c08401/FFF?text=Shahi+Deal', type: 'food' },
                { id: 'D02', name: '4 Person Platter', desc: '4 Pizza Kabab, 4 Labanese Kabab, 4 Qalmi Tikka, 4 Malai Boti, Full Afghani Pulao.', price: 3390, img: 'https://placehold.co/600x400/c08401/FFF?text=4+Person+Platter', type: 'food' },
                { id: 'D03', name: 'Student Deal', desc: '2 Chicken Kabab, 4 Tikka Boti, 1/4 Chk Karahi, Rice, Raita, 4 Roti, 1 Ltr Drink.', price: 1699, img: 'https://placehold.co/600x400/c08401/FFF?text=Student+Deal', type: 'food' }
            ],
            salan: [
                { id: 'S01', name: 'Chicken Karahi', desc: 'Classic wok-cooked dish with rich tomato and ginger gravy.', price: 1200, img: 'https://images.unsplash.com/photo-1631515243349-e0cb75fb8da7?q=80&w=600&auto=format&fit=crop', type: 'food' },
                { id: 'S02', name: 'Mutton Korma', desc: 'Tender mutton in a creamy, spiced yogurt sauce.', price: 1800, img: 'https://images.unsplash.com/photo-1629548489387-2795b861aa84?q=80&w=600&auto=format&fit=crop', type: 'food' },
            ],
            bbq: [
                { id: 'B01', name: 'Chicken Tikka Boti', desc: 'Spicy, marinated chicken chunks grilled to perfection.', price: 800, img: 'https://images.unsplash.com/photo-1599487488170-d11ec9c172f0?q=80&w=600&auto=format&fit=crop', type: 'food' },
                { id: 'B02', name: 'Seekh Kebab', desc: 'Minced meat skewers infused with herbs and spices.', price: 950, img: 'https://images.unsplash.com/photo-1529692236671-f1f6b5f46b54?q=80&w=600&auto=format&fit=crop', type: 'food' },
            ],
            rice: [
                { id: 'R01', name: 'Chicken Biryani', desc: 'Aromatic basmati rice with spiced chicken, a national favorite.', price: 600, img: 'https://images.unsplash.com/photo-1589302168068-964664d93dc0?q=80&w=600&auto=format&fit=crop', type: 'food' },
                { id: 'R02', name: 'Mutton Pulao', desc: 'Subtly flavored rice cooked in rich mutton broth.', price: 850, img: 'https://images.unsplash.com/photo-1630409349884-a59026d1814a?q=80&w=600&auto=format&fit=crop', type: 'food' },
            ],
             beverages: [
                { id: 'V01', name: 'Sweet Lassi', desc: 'Refreshing and creamy sweet yogurt-based drink.', price: 200, img: 'https://placehold.co/600x400/E6E6FA/333?text=Lassi', type: 'drink' },
                { id: 'V02', name: 'Mint Margarita', desc: 'A zesty and cool slushy perfect for Multan\'s heat.', price: 250, img: 'https://placehold.co/600x400/98FB98/333?text=Margarita', type: 'drink' },
                { id: 'V03', name: 'Soft Drink', desc: 'Chilled carbonated soft drinks.', price: 100, img: 'https://placehold.co/600x400/FF6347/FFF?text=Soft+Drink', type: 'drink' },
            ],
            bread: [
                { id: 'N01', name: 'Roghni Naan', desc: 'Soft, fluffy naan bread brushed with butter and sesame seeds.', price: 70, img: 'https://placehold.co/600x400/D2691E/FFF?text=Roghni+Naan', type: 'food' },
                { id: 'N02', name: 'Garlic Naan', desc: 'Popular flatbread topped with fresh garlic and coriander.', price: 80, img: 'https://placehold.co/600x400/DEB887/333?text=Garlic+Naan', type: 'food' },
            ]
        };

        // --- UI Elements ---
        const cartPanel = document.getElementById('cart-panel');
        const cartOverlay = document.getElementById('cart-overlay');
        const cartItemsContainer = document.getElementById('cart-items');
        const emptyCartMsg = document.getElementById('empty-cart-msg');
        const cartTotalEl = document.getElementById('cart-total');
        const toastEl = document.getElementById('toast-notification');
        const toastMessageEl = document.getElementById('toast-message');
        const aiSuggestionArea = document.getElementById('ai-suggestion-area');
        const suggestionButton = document.getElementById('suggestion-button');
        const suggestionResultEl = document.getElementById('suggestion-result');
        const checkoutModal = document.getElementById('checkout-modal');
        const checkoutModalOverlay = document.getElementById('checkout-modal-overlay');
        const checkoutForm = document.getElementById('checkout-form');
        
        // --- Toast Notification Logic ---
        function showToast(message) {
            toastMessageEl.textContent = message;
            toastEl.classList.add('show');
            setTimeout(() => {
                toastEl.classList.remove('show');
            }, 3000); // Hide after 3 seconds
        }

        // --- Cart Logic ---
        function addToCart(itemId, showMsg = true) {
            const existingItem = cart.find(item => item.id === itemId);
            let itemName = '';
            
            if (existingItem) {
                existingItem.quantity++;
                itemName = existingItem.name;
            } else {
                let itemToAdd;
                for (const category in menuData) {
                    const found = menuData[category].find(item => item.id === itemId);
                    if (found) {
                        itemToAdd = { ...found, quantity: 1 };
                        break;
                    }
                }
                if (itemToAdd) {
                    cart.push(itemToAdd);
                    itemName = itemToAdd.name;
                }
            }
            if(showMsg) showToast(`'${itemName}' Added to your Cart Menu!`);
            updateCart();
        }

        function updateQuantity(itemId, change) {
            const itemInCart = cart.find(item => item.id === itemId);
            if (itemInCart) {
                itemInCart.quantity += change;
                if (itemInCart.quantity <= 0) {
                    cart = cart.filter(item => item.id !== itemId);
                }
            }
            updateCart();
        }

        function updateCart() {
            renderCartItems();
            updateCartTotal();
            updateCartCount();
            toggleAiSuggestion();
        }

        function renderCartItems() {
            cartItemsContainer.innerHTML = '';
            if (cart.length === 0) {
                cartItemsContainer.appendChild(emptyCartMsg);
                emptyCartMsg.style.display = 'block';
                return;
            }
            emptyCartMsg.style.display = 'none';
            cart.forEach(item => {
                const itemEl = document.createElement('div');
                itemEl.className = 'flex items-center justify-between mb-4';
                itemEl.innerHTML = `
                    <div class="flex items-center">
                        <img src="${item.img}" alt="${item.name}" class="w-16 h-16 object-cover rounded-md mr-4">
                        <div>
                            <p class="font-bold">${item.name}</p>
                            <p class="text-sm text-gray-600">Rs. ${item.price}</p>
                        </div>
                    </div>
                    <div class="flex items-center">
                        <button class="cart-item-quantity-btn" onclick="updateQuantity('${item.id}', -1)">-</button>
                        <span class="px-3 font-bold">${item.quantity}</span>
                        <button class="cart-item-quantity-btn" onclick="updateQuantity('${item.id}', 1)">+</button>
                    </div>
                `;
                cartItemsContainer.appendChild(itemEl);
            });
        }
        
        window.updateQuantity = updateQuantity;

        function updateCartTotal() {
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            cartTotalEl.textContent = `Rs. ${total}`;
            return total;
        }

        function updateCartCount() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const countEl = document.getElementById('cart-count');
            if (totalItems > 0) {
                countEl.textContent = totalItems;
                countEl.classList.remove('hidden');
            } else {
                countEl.classList.add('hidden');
            }
        }
        
        function toggleCart() {
            cartPanel.classList.toggle('translate-x-full');
            cartOverlay.classList.toggle('hidden');
        }
        
        // --- Checkout Modal Logic ---
        function toggleCheckoutModal() {
            if (checkoutModal.classList.contains('hidden')) {
                checkoutModal.classList.remove('hidden');
                checkoutModalOverlay.classList.remove('hidden');
                setTimeout(() => {
                    checkoutModal.classList.remove('scale-95', 'opacity-0');
                }, 10);
            } else {
                checkoutModal.classList.add('scale-95', 'opacity-0');
                setTimeout(() => {
                    checkoutModal.classList.add('hidden');
                    checkoutModalOverlay.classList.add('hidden');
                }, 300);
            }
        }
        
        document.getElementById('checkout-button').addEventListener('click', () => {
             if(cart.length === 0) {
                alert('Add Some item in Cart .');
                return;
            }
            toggleCart(); // Close the cart panel
            toggleCheckoutModal(); // Open the checkout modal
        });
        
        document.getElementById('cancel-order-button').addEventListener('click', toggleCheckoutModal);
        checkoutModalOverlay.addEventListener('click', toggleCheckoutModal);
        
        checkoutForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const customerName = document.getElementById('customer-name').value;
            const customerPhone = document.getElementById('customer-phone').value;
            const customerAddress = document.getElementById('customer-address').value;
            
            let orderSummary = `*New Order from Fanan Restaurant Website* üç≤\n\n`;
            orderSummary += `*Customer Details:*\n`;
            orderSummary += `Name: ${customerName}\n`;
            orderSummary += `Phone: ${customerPhone}\n`;
            orderSummary += `Address: ${customerAddress}\n\n`;
            orderSummary += `*Order Items:*\n`;
            
            cart.forEach(item => {
                orderSummary += `- ${item.name} (x${item.quantity}) = Rs. ${item.price * item.quantity}\n`;
            });
            
            orderSummary += `\n*Total Amount: Rs. ${updateCartTotal()}*`;
            
            const whatsappUrl = `https://wa.me/${restaurantWhatsAppNumber}?text=${encodeURIComponent(orderSummary)}`;
            
            window.open(whatsappUrl, '_blank');
            
            // Clear everything
            cart = [];
            updateCart();
            checkoutForm.reset();
            toggleCheckoutModal();
        });


        // --- AI Suggestion Logic ---
        function toggleAiSuggestion() {
            const hasFoodItems = cart.some(item => item.type === 'food');
            if(hasFoodItems) {
                aiSuggestionArea.classList.remove('hidden');
            } else {
                aiSuggestionArea.classList.add('hidden');
                suggestionResultEl.innerHTML = ''; 
            }
        }

        async function getDrinkSuggestion() {
            suggestionButton.disabled = true;
            suggestionResultEl.innerHTML = `<p class="text-gray-500">Suggesting the best drink for you...</p>`;
            const foodItems = cart.filter(item => item.type === 'food').map(item => item.name).join(', ');
            const drinkOptions = menuData.beverages.map(drink => drink.name).join(', ');
            const prompt = `You are a helpful restaurant assistant for 'Fanan Family Restaurant', which serves spicy and rich Pakistani food. A customer has the following items in their cart: ${foodItems}. Based on these items, suggest the single best beverage to pair with their meal from the following available options: ${drinkOptions}. Provide your response as a valid JSON object with two keys: "drinkName" (the exact name of the suggested drink from the list) and "reason" (a short, fun, one-sentence reason in Hindi (Latin) explaining why it's a good pairing). Example: {"drinkName": "Sweet Lassi", "reason": "Is masaledar khane ke baad thandi lassi ka maza hi kuch aur hai!"}`;
            
            try {
                 let chatHistory = [];
                 chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                 const payload = { contents: chatHistory };
                 const apiKey = "" 
                 const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                 const response = await fetch(apiUrl, {
                     method: 'POST',
                     headers: { 'Content-Type': 'application/json' },
                     body: JSON.stringify(payload)
                 });
                 const result = await response.json();
                
                 if (result.candidates && result.candidates.length > 0) {
                    const textResponse = result.candidates[0].content.parts[0].text.replace(/```json\n?/, '').replace(/```$/, '');
                    const jsonResponse = JSON.parse(textResponse);
                    const suggestedDrink = menuData.beverages.find(d => d.name === jsonResponse.drinkName);
                    if(suggestedDrink) {
                        renderSuggestion(suggestedDrink, jsonResponse.reason);
                    } else { throw new Error("Suggested drink not found in menu."); }
                 } else { throw new Error("No suggestion received from AI."); }

            } catch(error) {
                console.error("Gemini API Error:", error);
                suggestionResultEl.innerHTML = `<p class="text-red-500">Sorry, process is not responding at this moment.</p>`;
            } finally {
                suggestionButton.disabled = false;
            }
        }
        
        function renderSuggestion(drink, reason) {
             suggestionResultEl.innerHTML = `
                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3">
                    <p class="font-semibold text-gray-700">Our Opinion:</p>
                    <div class="flex items-center my-2">
                        <img src="${drink.img}" alt="${drink.name}" class="w-12 h-12 rounded-full object-cover mr-3">
                        <div>
                            <p class="font-bold text-lg text-yellow-800">${drink.name}</p>
                            <p class="text-sm text-gray-600 italic">"${reason}"</p>
                        </div>
                    </div>
                    <button class="w-full btn btn-secondary text-sm mt-2" onclick="addSuggestedToCart('${drink.id}')">Isko bhi add karein</button>
                </div>
            `;
        }
        window.addSuggestedToCart = (itemId) => { addToCart(itemId); suggestionResultEl.innerHTML = `<p class="text-green-600 font-semibold">Behtareen! Cart mein add ho gaya.</p>`; };
        suggestionButton.addEventListener('click', getDrinkSuggestion);
        document.getElementById('floating-cart-button').addEventListener('click', toggleCart);
        document.getElementById('cart-close-button').addEventListener('click', toggleCart);
        cartOverlay.addEventListener('click', toggleCart);

        // --- Menu Rendering Logic ---
        function renderMenuItems(category) {
            menuItemsContainer.innerHTML = '';
            const items = menuData[category];
            items.forEach(item => {
                const card = document.createElement('div');
                card.className = 'menu-item-card h-full flex flex-col';
                card.innerHTML = `
                    <img src="${item.img}" alt="${item.name}" class="w-full h-48 object-cover">
                    <div class="p-4 md:p-6 flex-grow flex flex-col">
                        <h3 class="text-xl md:text-2xl mb-2">${item.name}</h3>
                        <p class="text-gray-600 mb-4 flex-grow text-sm">${item.desc}</p>
                        <div class="flex justify-between items-center mt-4">
                            <span class="font-bold text-lg md:text-xl text-yellow-700">Rs. ${item.price}</span>
                            <button class="btn btn-secondary text-sm" data-item-id="${item.id}">Add to Cart</button>
                        </div>
                    </div>
                `;
                menuItemsContainer.appendChild(card);
            });
            menuItemsContainer.querySelectorAll('[data-item-id]').forEach(button => {
                button.addEventListener('click', (e) => {
                    addToCart(e.target.dataset.itemId);
                });
            });
        }

        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                tabButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                renderMenuItems(button.dataset.tab);
            });
        });
        renderMenuItems('deals'); // Initial render
        
        // --- Mobile Menu Toggle ---
        const menuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const openIcon = document.getElementById('menu-open-icon');
        const closeIcon = document.getElementById('menu-close-icon');
        const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
        function toggleMobileMenu() { mobileMenu.classList.toggle('-translate-x-full'); openIcon.classList.toggle('hidden'); closeIcon.classList.toggle('hidden'); }
        menuButton.addEventListener('click', toggleMobileMenu);
        mobileNavLinks.forEach(link => link.addEventListener('click', toggleMobileMenu));
        
        // --- Animation and Other JS ---
        const revealElements = document.querySelectorAll(".reveal");
        function reveal() { for (let i = 0; i < revealElements.length; i++) { if (revealElements[i].getBoundingClientRect().top < window.innerHeight - 100) { revealElements[i].classList.add("active"); } } }
        window.addEventListener("scroll", reveal);
        reveal();
        document.getElementById('year').textContent = new Date().getFullYear();
    });
    </script>
</body>
</html>
